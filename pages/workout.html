<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workout Tracker</title>
  <style>
    body { font-family: sans-serif; margin: 20px; background: #f4f4f4; }
    h1, h2 { text-align: center; }
    label, select, input, textarea, button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    textarea { height: 60px; }
    .entry { background: #fff; padding: 10px; margin: 10px 0; border-radius: 8px; }
    .routine-list { background: #fff; padding: 10px; border-radius: 8px; margin-top: 20px; }
    ul { padding-left: 20px; }
    .workout-section { margin-top: 30px; }
    .exercise-inputs input { width: 48%; display: inline-block; margin-right: 2%; }
    .complete-btn { margin-top: 10px; background: #28a745; color: white; padding: 10px; border: none; width: 100%; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>Workout Tracker</h1>

  <div id="workout-section" class="workout-section"></div>

  <h2>Workout Routines</h2>
  <div class="routine-list">
    <h3>Full Body A</h3>
    <ul>
      <li>Squat: 3 sets of 8-10 reps</li>
      <li>Push-ups or Dumbbell Bench Press: 3 sets of 8-12 reps</li>
      <li>Bent-over Rows: 3 sets of 8-10 reps</li>
      <li>Dumbbell Shoulder Press: 2 sets of 10-12 reps</li>
      <li>Plank: 3 sets of 30 sec â€“ 1 min</li>
    </ul>

    <h3>Full Body B</h3>
    <ul>
      <li>Deadlifts: 3 sets of 6-8 reps</li>
      <li>Pull-downs or Assisted Pull-ups: 3 sets of 8-10 reps</li>
      <li>Dumbbell Chest Press: 3 sets of 8-12 reps</li>
      <li>Goblet Reverse Lunge: 2-3 sets of 8 reps/leg</li>
      <li>Bicycle Crunches: 3 sets of 15-20 reps</li>
    </ul>
  </div>

  <h2>Workout History</h2>
  <div id="entries"></div>

  <script>
    const routinePlans = {
      "Full Body A": [
        "Squat",
        "Push-ups or Dumbbell Bench Press",
        "Bent-over Rows",
        "Dumbbell Shoulder Press",
        "Plank"
      ],
      "Full Body B": [
        "Deadlifts",
        "Pull-downs or Assisted Pull-ups",
        "Dumbbell Chest Press",
        "Goblet Reverse Lunge",
        "Bicycle Crunches"
      ],
      "Walk + C25K": [
        "5 Mile Walk + Couch to 5K Intervals"
      ]
    };

    function getTodayRoutine() {
      const today = new Date()
      const weekNumber = getWeekNumber(today)
      const day = today.getDay()
      if ([1, 3, 5].includes(day)) {
        return weekNumber % 2 === 0 ? "Full Body A" : "Full Body B"
      } else if ([2, 6].includes(day)) {
        return "Walk + C25K"
      }
      return "Rest"
    }

    function getWeekNumber(d) {
      d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()))
      const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1))
      const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1)/7)
      return weekNo
    }

    function renderWorkoutForm(routine) {
      const section = document.getElementById('workout-section')
      if (routine === "Rest") {
        section.innerHTML = '<h2>Today is a rest day. ðŸ’¤</h2>'
        return
      }
      const exercises = routinePlans[routine]
      let html = `<h2>Today's Plan: ${routine}</h2><form id="workout-form">`
      exercises.forEach(name => {
        html += `
          <label>${name}</label>
          <div class="exercise-inputs">
            <input type="number" placeholder="Weight (lbs)" name="${name}-weight">
            <input type="text" placeholder="Notes" name="${name}-note">
          </div>
        `
      })
      html += `<button type="submit" class="complete-btn">Mark Workout Complete</button></form>`
      section.innerHTML = html

      document.getElementById('workout-form').addEventListener('submit', e => {
        e.preventDefault()
        const formData = new FormData(e.target)
        const data = {}
        for (const [key, value] of formData.entries()) {
          data[key] = value
        }
        const date = new Date().toISOString().split('T')[0]
        const entries = JSON.parse(localStorage.getItem('workoutEntries') || '{}')
        entries[date] = { routine, data }
        localStorage.setItem('workoutEntries', JSON.stringify(entries))
        loadEntries()
        section.innerHTML = `<h2>Workout Logged for ${date}</h2>`
      })
    }

    function loadEntries() {
      const entries = JSON.parse(localStorage.getItem('workoutEntries') || '{}')
      const div = document.getElementById('entries')
      div.innerHTML = ''
      const sortedDates = Object.keys(entries).sort((a,b) => new Date(b) - new Date(a))
      sortedDates.forEach(date => {
        const { routine, data } = entries[date]
        const details = data ? Object.entries(data).map(([k, v]) => `<li>${k.replace(/-/g, ' ')}: ${v}</li>`).join('') : null
        if (!details) return
        const entry = document.createElement('div')
        entry.className = 'entry'
        entry.innerHTML = `<strong>${date}</strong><br>Routine: ${routine}<ul>${details}</ul>`
        div.appendChild(entry)
      })
    }

    const todayRoutine = getTodayRoutine()
    renderWorkoutForm(todayRoutine)
    loadEntries()
  </script>
</body>
</html>